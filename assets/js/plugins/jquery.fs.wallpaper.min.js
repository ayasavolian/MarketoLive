!function(l,n){"use strict";function v(n){var u=l.extend({},f,n);t=l("body"),p=P(),m=p!==!1,m||(p="transitionend.wallpaper");for(var o=l(this),a=0,i=o.length;i>a;a++)y.apply(o.eq(a),[l.extend({},u)]);return t.hasClass("wallpaper-inititalized")||(t.addClass("wallpaper-inititalized"),e.on("resize.wallpaper",u,I)),o}function y(n){var e=l(this);if(!e.hasClass("wallpaper")){l.extend(n,e.data("wallpaper-options")),e.addClass("wallpaper").append('<div class="wallpaper-container"></div>'),n.guid="wallpaper-"+a++,n.youTubeGuid=0,n.$target=e,n.$container=n.$target.find(".wallpaper-container"),n.$target.data("wallpaper",n).on("resize.wallpaper",n,_);var t=n.source;n.source=null,b(t,n,!0),n.onReady.call()}}function b(l,e,t){if(l!==e.source){if(e.source=l,e.isYouTube=!1,"object"==typeof l&&"string"==typeof l.video){var u=l.video.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i);u&&u.length>=1&&(e.isYouTube=!0,e.videoId=u[1])}if(e.isYouTube)e.playing=!1,e.playerReady=!1,e.posterLoaded=!1,C(l,e,t);else if("object"!=typeof l||l.hasOwnProperty("fallback")){if(e.responsiveSource)for(var o in e.responsiveSource)e.responsiveSource.hasOwnProperty(o)&&e.responsiveSource[o].mq.removeListener(T);if(e.responsive=!1,e.responsiveSource=null,"object"==typeof l){var i,a=[];for(var r in l)if(l.hasOwnProperty(r)){var s="fallback"===r?"(min-width: 0px)":r;if(s){var c=n.matchMedia(s.replace(1/0,"100000px"));c.addListener(T),a.push({mq:c,source:l[r]}),c.matches&&(i=l[r])}}e.responsive=!0,e.responsiveSource=a,l=i}A(l,e,!1,t)}else k(l,e,t)}else e.$target.trigger("wallpaper.loaded"),e.onLoad.call(e.$target)}function A(n,e,t,a){var i=l('<div class="wallpaper-media wallpaper-image'+(a!==!0?" animated":"")+'"><img /></div>'),r=i.find("img"),s=n;r.one("load.wallpaper",function(){o&&i.addClass("native").css({backgroundImage:"url('"+s+"')"}),i.on(p,function(n){D(n),l(n.target).is(i)&&(i.off(p),t||N(e))}),setTimeout(function(){i.css({opacity:1}),e.responsive&&a&&N(e)},0),_({data:e}),(!t||a)&&(e.$target.trigger("wallpaper.loaded"),e.onLoad.call(e.$target)),u=l(".wallpaper-responsive")}).attr("src",s),e.responsive&&i.addClass("wallpaper-responsive"),e.$container.append(i),(r[0].complete||4===r[0].readyState)&&r.trigger("load.wallpaper")}function k(n,e,t){if(e.source.poster&&(A(e.source.poster,e,!0,!0),t=!1),!c){var u='<div class="wallpaper-media wallpaper-video'+(t!==!0?" animated":"")+'">';u+="<video",e.loop&&(u+=" loop"),e.mute&&(u+=" muted"),u+=">",e.source.webm&&(u+='<source src="'+e.source.webm+'" type="video/webm" />'),e.source.mp4&&(u+='<source src="'+e.source.mp4+'" type="video/mp4" />'),e.source.ogg&&(u+='<source src="'+e.source.ogg+'" type="video/ogg" />'),u+="</video>",u+="</div>";var o=l(u),a=o.find("video");a.one("loadedmetadata.wallpaper",function(n){o.on(p,function(n){D(n),l(n.target).is(o)&&(o.off(p),N(e))}),setTimeout(function(){o.css({opacity:1})},0),_({data:e}),e.$target.trigger("wallpaper.loaded"),e.onLoad.call(e.$target),e.hoverPlay?e.$target.on("mouseover.boxer",g.play).on("mouseout.boxer",g.pause):e.autoPlay&&this.play()}),e.$container.append(o)}}function C(e,t,u){if(!t.videoId){var o=e.match(/^.*(?:youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#\&\?]*).*/);t.videoId=o[1]}if(t.posterLoaded||(t.source.poster||(t.source.poster="http://img.youtube.com/vi/"+t.videoId+"/0.jpg"),t.posterLoaded=!0,A(t.source.poster,t,!0,u),u=!1),!c)if(l("script[src*='youtube.com/iframe_api']").length||l("head").append('<script src="//www.youtube.com/iframe_api"></script>'),i){var a=t.guid+"_"+t.youTubeGuid++,s="";s+='<div class="wallpaper-media wallpaper-embed'+(u!==!0?" animated":"")+'">',s+='<div id="'+a+'"></div>',s+="</div>";var d=l(s);t.$container.append(d),t.player&&(t.oldPlayer=t.player,t.player=null),t.player=new n.YT.Player(a,{videoId:t.videoId,playerVars:{controls:0,rel:0,showinfo:0,wmode:"transparent",enablejsapi:1,version:3,playerapiid:a,loop:t.loop?1:0,autoplay:1,origin:n.location.protocol+"//"+n.location.host},events:{onReady:function(l){t.playerReady=!0,t.mute&&t.player.mute(),t.hoverPlay?t.$target.on("mouseover.boxer",g.play).on("mouseout.boxer",g.pause):t.autoPlay&&t.player.playVideo()},onStateChange:function(e){t.playing||e.data!==n.YT.PlayerState.PLAYING?t.loop&&t.playing&&e.data===n.YT.PlayerState.ENDED&&t.player.playVideo():(t.playing=!0,(t.hoverPlay||!t.autoPlay)&&t.player.pauseVideo(),t.$target.trigger("wallpaper.loaded"),t.onLoad.call(t.$target),d.on(p,function(n){D(n),l(n.target).is(d)&&(d.off(p),N(t))}),d.css({opacity:1})),t.$target.find(".wallpaper-embed").addClass("ready")},onPlaybackQualityChange:function(l){},onPlaybackRateChange:function(l){},onError:function(l){},onApiChange:function(l){}}}),_({data:t})}else r.push({source:e,data:t})}function N(n){var e=n.$container.find(".wallpaper-media");e.length>=1&&(e.not(":last").remove(),n.oldPlayer=null),u=l(".wallpaper-responsive")}function w(n){var e=n.$container.find(".wallpaper-media");e.length>=1&&e.on(p,function(t){D(t),l(t.target).is(e)&&(l(this).remove(),delete n.source)}).css({opacity:0})}function _(l){D(l);for(var n=l.data,e=n.$container.find(".wallpaper-media"),t=0,u=e.length;u>t;t++){var o=e.eq(t),a=n.isYouTube?"iframe":o.find("video").length?"video":"img",i=o.find(a);if(i.length&&("img"!==a||!n.nativeSupport)){var r=n.$target.outerWidth(),s=n.$target.outerHeight(),d=M(n,i);n.width=d.naturalWidth,n.height=d.naturalHeight,n.left=0,n.top=0;var p=n.isYouTube?n.embedRatio:n.width/n.height;n.height=s,n.width=n.height*p,n.width<r&&(n.width=r,n.height=n.width/p),n.left=-(n.width-r)/2,n.top=-(n.height-s)/2,o.css({height:n.height,width:n.width,left:n.left,top:n.top})}}}function I(){l(".wallpaper").each(function(){var n=l(this).data("wallpaper");_({data:n})})}function T(){h=S(h,5,E)}function E(){x(h),u.each(function(){for(var n=l(this),t=(n.find("img"),n.parents(".wallpaper").data("wallpaper")),u=t.responsiveSource,o=0,a=0,i=u.length;i>a;a++)if(u.hasOwnProperty(a)){var r=u[a].mq;r&&r.matches&&(o=a)}A(u[o].source,t,!1,!0),n.trigger("change.wallpaper")})}function S(l,n,e,t){return x(l,t),setTimeout(e,n)}function x(l){null!==l&&(clearInterval(l),l=null)}function M(l,n){if(l.isYouTube)return{naturalHeight:500,naturalWidth:500/l.embedRatio};if(n.is("img")){var e=n[0];if("undefined"!=typeof e.naturalHeight)return{naturalHeight:e.naturalHeight,naturalWidth:e.naturalWidth};var t=new Image;return t.src=e.src,{naturalHeight:t.height,naturalWidth:t.width}}return{naturalHeight:n[0].videoHeight,naturalWidth:n[0].videoWidth}}function D(l){l.preventDefault&&(l.stopPropagation(),l.preventDefault())}function P(){var l={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},n=document.createElement("div");for(var e in l)if(l.hasOwnProperty(e)&&e in n.style)return l[e]+".wallpaper";return!1}var t,p,m,h,e=l(n),u=null,o="backgroundSize"in document.documentElement.style,a=0,i=!1,r=[],s=n.navigator.userAgent||n.navigator.vendor||n.opera,c=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(s),f=(s.toLowerCase().indexOf("safari")>=0&&s.toLowerCase().indexOf("chrome")<0,{autoPlay:!0,embedRatio:1.777777,hoverPlay:!1,loop:!0,mute:!0,onLoad:l.noop,onReady:l.noop,source:null}),g={defaults:function(n){return f=l.extend(f,n||{}),l(this)},destroy:function(){var n=l(this).each(function(){var n=l(this).data("wallpaper");n&&(n.$container.remove(),n.$target.removeClass("wallpaper").off(".boxer").data("wallpaper",null))});return"undefined"!=typeof t&&"undefined"!=typeof e&&l(".wallpaper").length<1&&(t.removeClass("wallpaper-inititalized"),e.off(".wallpaper")),n},load:function(n){return l(this).each(function(){var e=l(this).data("wallpaper");e&&b(n,e)})},pause:function(){return l(this).each(function(){var n=l(this).data("wallpaper");if(n)if(n.isYouTube&&n.playerReady)n.player.pauseVideo();else{var e=n.$container.find("video");e.length&&e[0].pause()}})},play:function(){return l(this).each(function(){var n=l(this).data("wallpaper");if(n)if(n.isYouTube&&n.playerReady)n.player.playVideo();else{var e=n.$container.find("video");e.length&&e[0].play()}})},stop:function(){g.pause.apply(this)},unload:function(){return l(this).each(function(){var n=l(this).data("wallpaper");n&&w(n)})}};n.onYouTubeIframeAPIReady=function(){i=!0;for(var l in r)r.hasOwnProperty(l)&&C(r[l].source,r[l].data);r=[]},l.fn.wallpaper=function(l){return g[l]?g[l].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof l&&l?this:v.apply(this,arguments)},l.wallpaper=function(l){"defaults"===l&&g.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window);