!function(l,n){"use strict";function v(n){var u=l.extend({},h,n);t=l("body"),p=P(),m=p!==!1,m||(p="transitionend.wallpaper");for(var i=l(this),o=0,a=i.length;a>o;o++)y.apply(i.eq(o),[l.extend({},u)]);return t.hasClass("wallpaper-inititalized")||(t.addClass("wallpaper-inititalized"),e.on("resize.wallpaper",u,_)),i}function y(n){var e=l(this);if(!e.hasClass("wallpaper")){l.extend(n,e.data("wallpaper-options")),e.addClass("wallpaper").append('<div class="wallpaper-container"></div>'),n.guid="wallpaper-"+o++,n.youTubeGuid=0,n.$target=e,n.$container=n.$target.find(".wallpaper-container"),n.$target.data("wallpaper",n).on("resize.wallpaper",n,I);var t=n.source;n.source=null,b(t,n,!0),n.onReady.call()}}function b(l,e,t){if(l!==e.source){if(e.source=l,e.isYouTube=!1,"object"==typeof l&&"string"==typeof l.video){var u=l.video.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i);u&&u.length>=1&&(e.isYouTube=!0,e.videoId=u[1])}if(e.isYouTube)e.playing=!1,e.playerReady=!1,e.posterLoaded=!1,C(l,e,t);else if("object"!=typeof l||l.hasOwnProperty("fallback")){if(e.responsiveSource)for(var i in e.responsiveSource)e.responsiveSource.hasOwnProperty(i)&&e.responsiveSource[i].mq.removeListener(x);if(e.responsive=!1,e.responsiveSource=null,"object"==typeof l){var a,o=[];for(var r in l)if(l.hasOwnProperty(r)){var s="fallback"===r?"(min-width: 0px)":r;if(s){var c=n.matchMedia(s.replace(1/0,"100000px"));c.addListener(x),o.push({mq:c,source:l[r]}),c.matches&&(a=l[r])}}e.responsive=!0,e.responsiveSource=o,l=a}k(l,e,!1,t)}else A(l,e,t)}else e.$target.trigger("wallpaper.loaded"),e.onLoad.call(e.$target)}function k(n,e,t,o){var a=l('<div class="wallpaper-media wallpaper-image'+(o!==!0?" animated":"")+'"><img /></div>'),r=a.find("img"),s=n;r.one("load.wallpaper",function(){i&&a.addClass("native").css({backgroundImage:"url('"+s+"')"}),a.on(p,function(n){D(n),l(n.target).is(a)&&(a.off(p),t||w(e))}),setTimeout(function(){a.css({opacity:1}),e.responsive&&o&&w(e)},0),I({data:e}),(!t||o)&&(e.$target.trigger("wallpaper.loaded"),e.onLoad.call(e.$target)),u=l(".wallpaper-responsive")}).attr("src",s),e.responsive&&a.addClass("wallpaper-responsive"),e.$container.append(a),(r[0].complete||4===r[0].readyState)&&r.trigger("load.wallpaper")}function A(n,e,t){if(e.source.poster&&(k(e.source.poster,e,!0,!0),t=!1),!c){var u='<div class="wallpaper-media wallpaper-video'+(t!==!0?" animated":"")+'">';u+="<video",e.loop&&(u+=" loop"),e.mute&&(u+=" muted"),u+=">",e.source.webm&&(u+='<source src="'+e.source.webm+'" type="video/webm" />'),e.source.mp4&&(u+='<source src="'+e.source.mp4+'" type="video/mp4" />'),e.source.ogg&&(u+='<source src="'+e.source.ogg+'" type="video/ogg" />'),u+="</video>",u+="</div>";var i=l(u),o=i.find("video");o.one("loadedmetadata.wallpaper",function(n){i.on(p,function(n){D(n),l(n.target).is(i)&&(i.off(p),w(e))}),setTimeout(function(){i.css({opacity:1})},0),I({data:e}),e.$target.trigger("wallpaper.loaded"),e.onLoad.call(e.$target),e.hoverPlay?e.$target.on("mouseover.boxer",g.play).on("mouseout.boxer",g.pause):e.autoPlay&&this.play()}),e.$container.append(i)}}function C(e,t,u){if(!t.videoId){var i=e.match(/^.*(?:youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#\&\?]*).*/);t.videoId=i[1]}if(t.posterLoaded||(t.source.poster||(t.source.poster="http://img.youtube.com/vi/"+t.videoId+"/0.jpg"),t.posterLoaded=!0,k(t.source.poster,t,!0,u),u=!1),!c)if(l("script[src*='youtube.com/iframe_api']").length||l("head").append('<script src="//www.youtube.com/iframe_api"></script>'),a){var o=t.guid+"_"+t.youTubeGuid++,s="";s+='<div class="wallpaper-media wallpaper-embed'+(u!==!0?" animated":"")+'">',s+='<div id="'+o+'"></div>',s+="</div>";var d=l(s);t.$container.append(d),t.player&&(t.oldPlayer=t.player,t.player=null),t.player=new n.YT.Player(o,{videoId:t.videoId,playerVars:{controls:0,rel:0,showinfo:0,wmode:"transparent",enablejsapi:1,version:3,playerapiid:o,loop:t.loop?1:0,autoplay:1,origin:n.location.protocol+"//"+n.location.host},events:{onReady:function(l){t.playerReady=!0,t.mute&&t.player.mute(),t.hoverPlay?t.$target.on("mouseover.boxer",g.play).on("mouseout.boxer",g.pause):t.autoPlay&&t.player.playVideo()},onStateChange:function(e){t.playing||e.data!==n.YT.PlayerState.PLAYING?t.loop&&t.playing&&e.data===n.YT.PlayerState.ENDED&&t.player.playVideo():(t.playing=!0,(t.hoverPlay||!t.autoPlay)&&t.player.pauseVideo(),t.$target.trigger("wallpaper.loaded"),t.onLoad.call(t.$target),d.on(p,function(n){D(n),l(n.target).is(d)&&(d.off(p),w(t))}),d.css({opacity:1})),t.$target.find(".wallpaper-embed").addClass("ready")},onPlaybackQualityChange:function(l){},onPlaybackRateChange:function(l){},onError:function(l){},onApiChange:function(l){}}}),I({data:t})}else r.push({source:e,data:t})}function w(n){var e=n.$container.find(".wallpaper-media");e.length>=1&&(e.not(":last").remove(),n.oldPlayer=null),u=l(".wallpaper-responsive")}function N(n){var e=n.$container.find(".wallpaper-media");e.length>=1&&e.on(p,function(t){D(t),l(t.target).is(e)&&(l(this).remove(),delete n.source)}).css({opacity:0})}function I(l){D(l);for(var n=l.data,e=n.$container.find(".wallpaper-media"),t=0,u=e.length;u>t;t++){var i=e.eq(t),o=n.isYouTube?"iframe":i.find("video").length?"video":"img",a=i.find(o);if(a.length&&("img"!==o||!n.nativeSupport)){var r=n.$target.outerWidth(),s=n.$target.outerHeight(),d=M(n,a);n.width=d.naturalWidth,n.height=d.naturalHeight,n.left=0,n.top=0;var p=n.isYouTube?n.embedRatio:n.width/n.height;n.height=s,n.width=n.height*p,n.width<r&&(n.width=r,n.height=n.width/p),n.left=-(n.width-r)/2,n.top=-(n.height-s)/2,i.css({height:n.height,width:n.width,left:n.left,top:n.top})}}}function _(){l(".wallpaper").each(function(){var n=l(this).data("wallpaper");I({data:n})})}function x(){f=S(f,5,T)}function T(){E(f),u.each(function(){for(var n=l(this),t=(n.find("img"),n.parents(".wallpaper").data("wallpaper")),u=t.responsiveSource,i=0,o=0,a=u.length;a>o;o++)if(u.hasOwnProperty(o)){var r=u[o].mq;r&&r.matches&&(i=o)}k(u[i].source,t,!1,!0),n.trigger("change.wallpaper")})}function S(l,n,e,t){return E(l,t),setTimeout(e,n)}function E(l){null!==l&&(clearInterval(l),l=null)}function M(l,n){if(l.isYouTube)return{naturalHeight:500,naturalWidth:500/l.embedRatio};if(n.is("img")){var e=n[0];if("undefined"!=typeof e.naturalHeight)return{naturalHeight:e.naturalHeight,naturalWidth:e.naturalWidth};var t=new Image;return t.src=e.src,{naturalHeight:t.height,naturalWidth:t.width}}return{naturalHeight:n[0].videoHeight,naturalWidth:n[0].videoWidth}}function D(l){l.preventDefault&&(l.stopPropagation(),l.preventDefault())}function P(){var l={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},n=document.createElement("div");for(var e in l)if(l.hasOwnProperty(e)&&e in n.style)return l[e]+".wallpaper";return!1}var t,p,m,f,e=l(n),u=null,i="backgroundSize"in document.documentElement.style,o=0,a=!1,r=[],s=n.navigator.userAgent||n.navigator.vendor||n.opera,c=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(s),h=(s.toLowerCase().indexOf("safari")>=0&&s.toLowerCase().indexOf("chrome")<0,{autoPlay:!0,embedRatio:1.777777,hoverPlay:!1,loop:!0,mute:!0,onLoad:l.noop,onReady:l.noop,source:null}),g={defaults:function(n){return h=l.extend(h,n||{}),l(this)},destroy:function(){var n=l(this).each(function(){var n=l(this).data("wallpaper");n&&(n.$container.remove(),n.$target.removeClass("wallpaper").off(".boxer").data("wallpaper",null))});return"undefined"!=typeof t&&"undefined"!=typeof e&&l(".wallpaper").length<1&&(t.removeClass("wallpaper-inititalized"),e.off(".wallpaper")),n},load:function(n){return l(this).each(function(){var e=l(this).data("wallpaper");e&&b(n,e)})},pause:function(){return l(this).each(function(){var n=l(this).data("wallpaper");if(n)if(n.isYouTube&&n.playerReady)n.player.pauseVideo();else{var e=n.$container.find("video");e.length&&e[0].pause()}})},play:function(){return l(this).each(function(){var n=l(this).data("wallpaper");if(n)if(n.isYouTube&&n.playerReady)n.player.playVideo();else{var e=n.$container.find("video");e.length&&e[0].play()}})},stop:function(){g.pause.apply(this)},unload:function(){return l(this).each(function(){var n=l(this).data("wallpaper");n&&N(n)})}};n.onYouTubeIframeAPIReady=function(){a=!0;for(var l in r)r.hasOwnProperty(l)&&C(r[l].source,r[l].data);r=[]},l.fn.wallpaper=function(l){return g[l]?g[l].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof l&&l?this:v.apply(this,arguments)},l.wallpaper=function(l){"defaults"===l&&g.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window);