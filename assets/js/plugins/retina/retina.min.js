!function(){function e(){}function i(l){return n.retinaImageSuffix+l}function o(l,n){if(this.path=l||"","undefined"!=typeof n&&null!==n)this.at_2x_path=n,this.perform_check=!1;else{if(void 0!==document.createElement){var e=document.createElement("a");e.href=this.path,e.pathname=e.pathname.replace(t,i),this.at_2x_path=e.href}else{var o=this.path.split("?");o[0]=o[0].replace(t,i),this.at_2x_path=o.join("?")}this.perform_check=!0}}function u(l){this.el=l,this.path=new o(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var n=this;this.path.check_2x_variant(function(l){l&&n.swap()})}var l="undefined"==typeof exports?window:exports,n={retinaImageSuffix:"@2x",check_mime_type:!0,force_original_dimensions:!0};l.Retina=e,e.configure=function(l){null===l&&(l={});for(var e in l)l.hasOwnProperty(e)&&(n[e]=l[e])},e.init=function(n){null===n&&(n=l);var e=n.onload||function(){};n.onload=function(){var t,i,l=document.getElementsByTagName("img"),n=[];for(t=0;t<l.length;t+=1)i=l[t],i.getAttributeNode("data-no-retina")||n.push(new u(i));e()}},e.isRetina=function(){var n="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return l.devicePixelRatio>1?!0:l.matchMedia&&l.matchMedia(n).matches?!0:!1};var t=/\.\w+$/;l.RetinaImagePath=o,o.confirmed_paths=[],o.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))},o.prototype.check_2x_variant=function(l){var e,t=this;return this.is_external()?l(!1):this.perform_check||"undefined"==typeof this.at_2x_path||null===this.at_2x_path?this.at_2x_path in o.confirmed_paths?l(!0):(e=new XMLHttpRequest,e.open("HEAD",this.at_2x_path),e.onreadystatechange=function(){if(4!==e.readyState)return l(!1);if(e.status>=200&&e.status<=399){if(n.check_mime_type){var i=e.getResponseHeader("Content-Type");if(null===i||!i.match(/^image/i))return l(!1)}return o.confirmed_paths.push(t.at_2x_path),l(!0)}return l(!1)},e.send(),void 0):l(!0)},l.RetinaImage=u,u.prototype.swap=function(l){function t(){e.el.complete?(n.force_original_dimensions&&(e.el.setAttribute("width",e.el.offsetWidth),e.el.setAttribute("height",e.el.offsetHeight)),e.el.setAttribute("src",l)):setTimeout(t,5)}"undefined"==typeof l&&(l=this.path.at_2x_path);var e=this;t()},e.isRetina()&&e.init(l)}();