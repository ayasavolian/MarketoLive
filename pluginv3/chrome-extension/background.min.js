function getCookies(e,t,n){console.log("Background > Getting: Cookies"),chrome.cookies.get({url:e,name:t},function(e){e&&n&&n(e.value)})}function savePriv(e){console.log("Background > Saving: Edit Privileges");var t=e.editPrivileges,n={url:"https://login.marketo.com/*",name:"priv",value:t,domain:".marketo.com"},o={url:"https://www.marketodesigner.com/*",name:"priv",value:t,domain:".marketodesigner.com"};chrome.cookies.set(n,function(){console.log("Background > Setting: Edit Privileges Cookie for Marketo")}),chrome.cookies.set(o,function(){console.log("Background > Setting: Edit Privileges Cookie for Designer")}),chrome.storage.sync.set(e,function(){}),chrome.tabs.query({url:"*://*.marketo.com/*"},function(e){for(var t=0;t<e.length;++t)chrome.tabs.reload(e[t].id)})}function submitCompany(e){}function resetColor(){console.log("Background > Resetting: Company Color");var e={url:"http://www.marketodesigner.com/*",name:"color"},t={url:"http://marketolive.com/*",name:"color"};chrome.cookies.remove(e,function(){console.log("Background > Removing: Marketo Designer Company Color Cookie")}),chrome.cookies.remove(t,function(){console.log("Background > Removing: MarketoLive Company Color Cookie")})}function resetLogo(){console.log("Background > Resetting: Company Logo");var e={url:"http://www.marketodesigner.com/*",name:"logo"},t={url:"http://marketolive.com/*",name:"logo"};chrome.cookies.remove(e,function(){console.log("Background > Removing: Marketo Designer Company Logo Cookie")}),chrome.cookies.remove(t,function(){console.log("Background > Removing: MarketoLive Company Logo Cookie")})}function checkForValidUrl(e,t,n){console.log("Background > Checking: Valid URL");var o=n.url;chrome.browserAction.enable(e),(o.search(mktoLiveInstances)||o.search(mktoLiveDomain))&&getCookies(mktoAppMatch,"mkto_pod",function(e){var t=e,n=t.split("."),o=n[0].split(":");if(console.log(o),-1!=o[1].search("app-sjp")||-1!=o[1].search("app-ab07")||-1!=o[1].search("app-ab08")){var i={url:"http://www.marketo.com/*",name:"userPod",value:o[1],domain:".marketo.com"},r={url:"http://www.marketodesigner.com/*",name:"userPod",value:o[1],domain:".marketodesigner.com"},a={url:"https://marketolive.com/*",name:"userPod",value:o[1],domain:".marketolive.com"};chrome.cookies.set(i,function(){console.log("Background > Setting: Marketo User Pod Cookie "+o[1])}),chrome.cookies.set(r,function(){console.log("Background > Setting: Marketo Designer User Pod Cookie "+o[1])}),chrome.cookies.set(a,function(){console.log("Background > Setting: MarketoLive User Pod Cookie "+o[1])})}})}console.log("Background > Running");var mktoAppDomain="^https://app-[a-z0-9]+.marketo.com",mktoLiveInstances="^https://app-(sjp|ab07|ab08)+.marketo.com";mktoAppMatch="https://app-*.marketo.com",mktoLiveDomain="^https://marketolive.com",mktoLiveMatch="https://marketolive.com/*",mktoLoginDomain="^https://login.marketo.com",mktoAppLoginDomain="^https://app.marketo.com",mktoDesignerDomain="^https://[a-z0-9]+-[a-z0-9]+.marketodesigner.com",mktoDesignerMatch="https://*.marketodesigner.com/*",mktoEmailDesigner=mktoDesignerDomain+"/ds",mktoLandingPageDesigner=mktoDesignerDomain+"/lpeditor/",mktoWizard=mktoAppDomain+"/m#",rtpDemoDomain="^http://sjrtp1.marketo.com/demo/$|^http://cloud4.insightera.com/demo/$",emailDeliverabilityDomain="^https://250ok.com/",chrome.runtime.onMessage.addListener(function(e,t,n){if("setColorCookie"==e.action){console.log("Background > Color");var o={url:"http://www.marketodesigner.com/*",name:"color",value:e.color,domain:".marketodesigner.com"},i={url:"http://marketolive.com/*",name:"color",value:e.color,domain:".marketolive.com"},r={url:"http://www.marketodesigner.com/*",name:"logo",value:e.logo,domain:".marketodesigner.com"},a={url:"http://marketolive.com/*",name:"logo",value:e.logo,domain:".marketolive.com"};chrome.cookies.set(o,function(){console.log("Background > Setting: Colorscheme Cookie "+o.value)}),chrome.cookies.set(i,function(){console.log("Background > Setting: MarketoLive Colorscheme Cookie "+o.value)}),chrome.cookies.set(r,function(){console.log("Background > Setting: Marketo Logo Cookie "+r.value)}),chrome.cookies.set(a,function(){console.log("Background > Setting: MarketoLive Logo Cookie "+r.value)})}}),chrome.tabs.onUpdated.addListener(checkForValidUrl);